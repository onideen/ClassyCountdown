/*!
 * jQuery ClassyLED
 * www.class.pm
 *
 * Written by Marius Stanciu - Sergiu <marius@class.pm>
 * Licensed under the MIT license www.class.pm/LICENSE-MIT
 * Version 1.2.0
 *
 */
(function(l){l.fn.ClassyLED=function(k){var m=function(k,m){this.type;this.format;this.color;this.backgroundColor;this.rounded;this.spacing;this.hourFormat;this.length=8;this.size;this.new_date;this.flash=!0;this.dig=[];this.font1 = [" 000    0    000   000     0  00000   00  00000  000   000             ","0   0  00   0   0 0   0   00  0      0        0 0   0 0   0            ","0   0   0       0     0  0 0  0     0         0 0   0 0   0   0        ","0   0   0    000   000  0  0  0000  0000     0   000   0000            ","0   0   0   0         0 00000     0 0   0   0   0   0     0            ","0   0   0   0     0   0    0  0   0 0   0  0    0   0    0    0        "," 000   000  00000  000     0   000   000  0      000   00              "];this.font2 = [" 000    0    000  00000    0  00000   00  00000  000   000             ","0   0  00   0   0    0    00  0      0        0 0   0 0   0            ","0  00   0       0   0    0 0  0000  0        0  0   0 0   0   0        ","0 0 0   0     00     0  0  0      0 0000    0    000   0000            ","00  0   0    0        0 00000     0 0   0   0   0   0     0            ","0   0   0   0     0   0    0  0   0 0   0   0   0   0    0    0        "," 000   000  00000  000     0   000   000    0    000   00              "];this.font3 = ["00000     0 00000 00000 0   0 00000 00000 00000 00000 00000            ","0   0     0     0     0 0   0 0     0         0 0   0 0   0   0        ","0   0     0     0     0 0   0 0     0         0 0   0 0   0            ","0   0     0 00000 00000 00000 00000 00000     0 00000 00000            ","0   0     0 0         0     0     0 0   0     0 0   0     0            ","0   0     0 0         0     0     0 0   0     0 0   0     0   0        ","00000     0 00000 00000     0 00000 00000     0 00000 00000            "];this.led;this.__constructor=function(a){function c(a){a=a.split(":");for(var b=0;b<a.length;b++)a[b]=parseInt(a[b],10);a[0]=(new Date).getFullYear()+1;return a}function b(){var a=new Date;"countdown"===d.type&&d.updateLed1(a);"time"===d.type&&d.updateLed2(a);"random"===d.type?(d.updateLed0(),setTimeout(b,5E3)):setTimeout(b,1E3)}this.type="undefined"!==typeof a.type?a.type:"time";this.format="undefined"!==typeof a.format?a.format:"hh:mm";this.color="undefined"!==typeof a.color?a.color:"#FFF";this.backgroundColor= "undefined"!==typeof a.backgroundColor?a.backgroundColor:"#000";this.rounded="undefined"!==typeof a.rounded?a.rounded:1;this.spacing="undefined"!==typeof a.spacing?a.spacing:1;this.hourFormat="undefined"!==typeof a.hourFormat?a.hourFormat:24;this.fontType="undefined"!==typeof a.fontType?a.fontType:1;this.led=this["font"+this.fontType];this.size="undefined"!==typeof a.size?a.size:12;a=12;var e,d=this;30>this.size&&(a=this.size);var h=new Date;if("random"===this.type){e=Raphael(l(k)[0],6*this.length* (a+this.spacing)-(a+2*this.spacing),7*(a+this.spacing)-this.spacing);for(var f=0;f<6*this.length;f++){this.dig[f]=[];for(var g=0;7>g;g++)this.dig[f][g]=e.rect(f*(a+this.spacing),g*(a+this.spacing),a,a,this.rounded).attr({fill:this.backgroundColor,stroke:null})}b()}else e=Raphael(l(k)[0],6*this.format.length*(a+this.spacing)-(a+2*this.spacing),7*(a+this.spacing)-this.spacing);if("countdown"===this.type){h=c(h.getFullYear()+1+":1:1:0:0:00");this.new_date=new Date(h[0],h[1]-1,h[2],h[3],h[4]);for(f=0;72> f;f++)for(this.dig[f]=[],g=0;7>g;g++)this.dig[f][g]=e.rect(f*(a+this.spacing),g*(a+this.spacing),a,a,this.rounded).attr({fill:this.backgroundColor,stroke:null});b()}if("time"===this.type){for(f=0;f<6*("mm:ss"===this.format||"hh:mm"===this.format?5:"hh"===this.format||"mm"===this.format||"ss"===this.format?2:8);f++)for(this.dig[f]=[],g=0;7>g;g++)this.dig[f][g]=e.rect(f*(a+this.spacing),g*(a+this.spacing),a,a,this.rounded).attr({fill:this.backgroundColor,stroke:null});b()}};this.updateLed0=function(){for(var a= ["0","9999999"],a=""+parseInt(parseInt(a[0])+Math.random()*(parseInt(a[1])-parseInt(a[0])));String(a).length<this.length;)a="0"+a;this._tick(a)};this.updateLed1=function(a){var c=parseInt((this.new_date.getTime()-a.getTime())/1E3)+1,b=parseInt(c/86400),e=parseInt((c-86400*b)/3600),d=parseInt((c-86400*b-3600*e)/60),c=parseInt(c-86400*b-3600*e-60*d),b=(10>b?"00":100<b?"":"0")+b+":"+(10>e?"0":"")+e+":"+(10>d?"0":"")+d+":"+(10>c?"0":"")+c;0<=this.new_date.getTime()-a.getTime()?this._tick(b):this._tick("000:00:00:00")}; this.updateLed2=function(a){var c;c=parseInt(a.getHours());c=12===this.hourFormat?12<c?c-12:c:c;var b=parseInt(a.getMinutes());a=parseInt(a.getSeconds());"mm:ss"===this.format?c=(10>b?"0":"")+b+":"+(10>a?"0":"")+a:"hh:mm"===this.format?(c=this.flash?(10>c?"0":"")+c+":"+(10>b?"0":"")+b:(10>c?"0":"")+c+" "+(10>b?"0":"")+b,this.flash=!this.flash):c="hh"===this.format?(10>c?"0":"")+c:"mm"===this.format?(10>b?"0":"")+b:"ss"===this.format?(10>a?"0":"")+a:(10>c?"0":"")+c+":"+(10>b?"0":"")+b+":"+(10>a?"0": "")+a;this._tick(c)};this._tick=function(a){for(var c=0,b=0;b<a.length;b++){":"===a.charAt(b)?c=10:" "===a.charAt(b)?c=11:c=a.charAt(b);for(var e=0;6>e;e++)for(var d=0;7>d;d++)"0"===this.led[d].charAt(6*c+e)&&this.dig[6*b+e][d].attrs.fill===this.backgroundColor?this.dig[6*b+e][d].animate({fill:this.color},300):" "===this.led[d].charAt(6*c+e)&&this.dig[6*b+e][d].attrs.fill!==this.backgroundColor&&this.dig[6*b+e][d].animate({fill:this.backgroundColor},300)}};return this.__constructor(m)};return this.each(function(){k.id= l(this).attr("id");return new m(this,k)})}})(jQuery);